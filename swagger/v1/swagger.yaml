---
openapi: 3.0.1
info:
  title: API V1
  version: v1
paths:
  "/api/auth/login":
    post:
      summary: Login user
      tags:
      - Auth
      parameters: []
      responses:
        '200':
          description: Successful
          content:
            application/json:
              examples:
                Default:
                  value:
                    data:
                      message: Logged in successfully.
                      token: eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI2ZGY1ZDRkMi1jODNkLTQyNmItYjIxZC1iNTU1NDAyMjMwYTYiLCJzdWIiOiJmYWJmYjhlMS02MTQxLTQ2NmMtOThkYi04NWIyOWFlNjI4YzEiLCJzY3AiOiJ1c2VyIiwiYXVkIjpudWxsLCJpYXQiOjE3NDEyMTk1NjUsImV4cCI6MTc0MTMwNTk2NX0.9aPjJbzx647Ycak_rAKGDpJs5wlrZpi87HY7vtG05eU
                      user:
                        id: fabfb8e1-6141-466c-98db-85b29ae628c1
                        avatar:
                          id: 
                          attachment_id: 
                          content_type: 
                          url: 
                        email: test@test
                        full_name: Hui Kovacek
      requestBody:
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/auth/requests/login"
  "/api/auth/signup":
    post:
      summary: Sign up user
      tags:
      - Auth
      parameters: []
      responses:
        '200':
          description: Successful
          content:
            application/json:
              examples:
                Default:
                  value:
                    data:
                      message: Signed up successfully.
                      token: eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI2N2E5NDkwMi03NDE5LTQ2ODUtYTU1Yy1hNGE1ZjE2YTRjNzciLCJzdWIiOiIyY2U1ZThmMC1jZGIzLTQ4NWQtOTI1Mi1mNGNkZmQzNDA4N2MiLCJzY3AiOiJ1c2VyIiwiYXVkIjpudWxsLCJpYXQiOjE3NDEyMTk1NjUsImV4cCI6MTc0MTMwNTk2NX0.M_Q2OtipF9aBlF03UthPBwStI4deZ9VLVoPG34v-bQ4
                      user:
                        id: 2ce5e8f0-cdb3-485d-9252-f4cdfd34087c
                        avatar:
                          id: 
                          attachment_id: 
                          content_type: 
                          url: 
                        email: teste@teste
                        full_name: 
      requestBody:
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/auth/requests/signup"
  "/api/auth/logout":
    delete:
      summary: Logout User
      tags:
      - Auth
      security:
      - bearer_auth: []
      responses:
        '200':
          description: Successful
  "/api/v1/categories":
    get:
      summary: List Categories
      tags:
      - Categories
      security:
      - bearer_auth: []
      parameters:
      - name: search
        in: query
        schema:
          type: string
      - name: q[user_id_eq]
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Filter by user_id or global
          content:
            application/json:
              examples:
                Default:
                  value:
                    meta:
                      current_page: 1
                      total_pages: 1
                      current_page_size: 50
                      total: 1
                    data:
                    - id: b2d463e5-8a20-42e1-bcf0-2aa3d7dd01b6
                      created_at: '2025-03-06T00:06:05.699Z'
                      description: Ipsam impedit rerum quam.
                      name: George Bradtke
                      updated_at: '2025-03-06T00:06:05.699Z'
        '401':
          description: Unauthorized
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      auth: You need to sign in or sign up before continuing.
    post:
      summary: Create Category
      tags:
      - Categories
      security:
      - bearer_auth: []
      parameters: []
      responses:
        '200':
          description: Successful
          content:
            application/json:
              examples:
                Default:
                  value:
                    data:
                      id: 8e3914d3-798f-4f9b-a3f3-1acf28b68fdb
                      created_at: 2025-03-06 00:06:05 UTC
                      description: dummy
                      name: dummy
                      updated_at: 2025-03-06 00:06:05 UTC
                      user:
                        id: 9bc55cee-0c35-48ef-9a33-9c8adfd8199d
                        avatar:
                          id: 
                          attachment_id: 
                          content_type: 
                          url: 
                        email: lyle@ratke-schoen.test
                        full_name: Penni Murphy Sr.
      requestBody:
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/v1/categories/requests/create"
  "/api/v1/transactions":
    get:
      summary: List Transactions
      tags:
      - Transactions
      security:
      - bearer_auth: []
      parameters:
      - name: search
        in: query
        schema:
          type: string
      - name: q[category_id_eq]
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Don not return transactions from other users
          content:
            application/json:
              examples:
                Default:
                  value:
                    meta:
                      current_page: 1
                      total_pages: 1
                      current_page_size: 50
                      total: 3
                    data:
                    - id: 9919b946-1c54-4256-b9e8-25d6a140a6e7
                      amount: '927.96'
                      category:
                        id: 336fb483-0550-49f8-adf6-770b9c112e40
                        created_at: '2025-03-06T00:06:06.135Z'
                        description: Et voluptatem deleniti rerum.
                        name: Chi White DC
                        updated_at: '2025-03-06T00:06:06.135Z'
                      created_at: '2025-03-06T00:06:06.137Z'
                      description: Harum placeat est vel.
                      name: Synergistic Leather Clock 38
                      transaction_type: expense
                      updated_at: '2025-03-06T00:06:06.137Z'
                    - id: d801e00e-6826-4329-a677-66cc14cbce0e
                      amount: '103.78'
                      category:
                        id: 5c20703a-a625-4bc4-888d-19d6ff617a94
                        created_at: '2025-03-06T00:06:06.127Z'
                        description: Ipsa odit ea voluptatibus.
                        name: Omar Raynor
                        updated_at: '2025-03-06T00:06:06.127Z'
                      created_at: '2025-03-06T00:06:06.129Z'
                      description: Cupiditate dolor aut soluta.
                      name: Durable Silk Clock 37
                      transaction_type: income
                      updated_at: '2025-03-06T00:06:06.129Z'
                    - id: b56aae3e-48f2-45a7-8a5d-940731ac9745
                      amount: '335.52'
                      category:
                        id: 39dbbcd5-2bc0-4a54-866d-e791e7431f15
                        created_at: '2025-03-06T00:06:06.122Z'
                        description: Repellat animi quia temporibus.
                        name: Josue Stark
                        updated_at: '2025-03-06T00:06:06.122Z'
                      created_at: '2025-03-06T00:06:06.124Z'
                      description: Qui voluptatem quasi veritatis.
                      name: Synergistic Linen Bottle 36
                      transaction_type: expense
                      updated_at: '2025-03-06T00:06:06.124Z'
        '401':
          description: Unauthorized
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      auth: You need to sign in or sign up before continuing.
    post:
      summary: Create Transaction
      tags:
      - Transactions
      security:
      - bearer_auth: []
      parameters: []
      responses:
        '200':
          description: Successful
          content:
            application/json:
              examples:
                Default:
                  value:
                    data:
                      id: 0347a23c-9221-44dd-9d10-33a2fdba1419
                      amount: '100.0'
                      category:
                        id: d784916c-b501-4e7a-8c1f-ac5b0f3c9626
                        created_at: 2025-03-06 00:06:06 UTC
                        description: Excepturi consequatur expedita voluptatem.
                        name: Frederica Hand
                        updated_at: 2025-03-06 00:06:06 UTC
                      created_at: 2025-03-06 00:06:06 UTC
                      description: 
                      name: dummy
                      transaction_type: expense
                      updated_at: 2025-03-06 00:06:06 UTC
                      user:
                        id: 520d2d54-3c5d-41d0-9928-9a0c7d5f2fad
                        avatar:
                          id: 
                          attachment_id: 
                          content_type: 
                          url: 
                        email: lucienne_senger@rath.example
                        full_name: Hettie Tillman
        '422':
          description: Validates errors
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      category:
                      - must exist
                      name:
                      - can't be blank
                      amount:
                      - can't be blank
                    request_id: 876e9ec4-069d-4a15-859c-fbdd68636609
        '401':
          description: Unauthorized
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      auth: You need to sign in or sign up before continuing.
      requestBody:
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/v1/transactions/requests/create"
  "/api/v1/transactions/{id}":
    get:
      summary: Show Transaction
      tags:
      - Transactions
      security:
      - bearer_auth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Successful
          content:
            application/json:
              examples:
                Default:
                  value:
                    data:
                      id: 67108fb0-7ccc-464b-81ef-603cf582cc7e
                      amount: '179.54'
                      category:
                        id: db0e2c5c-2d21-4cb0-981e-39e5e133b54f
                        created_at: 2025-03-06 00:06:06 UTC
                        description: Molestiae ut dolor sed.
                        name: Jeremy Dickinson
                        updated_at: 2025-03-06 00:06:06 UTC
                      created_at: 2025-03-06 00:06:06 UTC
                      description: Ullam quia molestias reprehenderit.
                      name: Lightweight Leather Bench 47
                      transaction_type: income
                      updated_at: 2025-03-06 00:06:06 UTC
                      user:
                        id: 1bc30255-4b70-4039-9c50-b8d8d1ef39d5
                        avatar:
                          id: 
                          attachment_id: 
                          content_type: 
                          url: 
                        email: thad@emard-vonrueden.test
                        full_name: Lester Koepp
        '404':
          description: Not found
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      base:
                      - Couldn't find Transaction with 'id'=not_an_id
                    request_id: 154793b9-17e2-4c42-9f3d-2773e44b70c2
        '401':
          description: Unauthorized
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      auth: You need to sign in or sign up before continuing.
    put:
      summary: Update Transaction
      tags:
      - Transactions
      security:
      - bearer_auth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Successful
          content:
            application/json:
              examples:
                Default:
                  value:
                    data:
                      id: e6469cd4-c419-4314-8c58-2178af8e5e49
                      amount: '100.0'
                      category:
                        id: 50398d36-d177-45f5-b106-42a6c2b31a50
                        created_at: 2025-03-06 00:06:06 UTC
                        description: Ipsam sapiente fugit molestias.
                        name: Lino Price
                        updated_at: 2025-03-06 00:06:06 UTC
                      created_at: 2025-03-06 00:06:06 UTC
                      description: Molestiae tenetur quam enim.
                      name: dummy
                      transaction_type: expense
                      updated_at: 2025-03-06 00:06:06 UTC
                      user:
                        id: b88588f9-dba7-425c-969c-082bf12d875d
                        avatar:
                          id: 
                          attachment_id: 
                          content_type: 
                          url: 
                        email: rolf.ebert@miller-price.test
                        full_name: Brian Bartell Jr.
        '422':
          description: Validates errors
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      name:
                      - can't be blank
                    request_id: 54a4d212-878a-450d-85de-e7c728de9569
        '404':
          description: Not found
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      base:
                      - Couldn't find Transaction with 'id'=not_an_id
                    request_id: 8ed12cb4-550a-4ce7-8635-27bc176aa247
        '401':
          description: Unauthorized
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      auth: You need to sign in or sign up before continuing.
      requestBody:
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/v1/transactions/requests/update"
    delete:
      summary: Delete Transaction
      tags:
      - Transactions
      security:
      - bearer_auth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Successful
          content:
            application/json:
              examples:
                Default:
                  value:
                    message: Transaction deleted successfully
        '404':
          description: Not found
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      base:
                      - Couldn't find Transaction with 'id'=not_an_id
                    request_id: 93a6d866-8b1b-4a7c-b279-a1054e3d226e
        '401':
          description: Unauthorized
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      auth: You need to sign in or sign up before continuing.
  "/api/v1/users/{id}":
    get:
      summary: Show User
      tags:
      - Users
      security:
      - bearer_auth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Successful
          content:
            application/json:
              examples:
                Default:
                  value:
                    data:
                      id: 67c98e65-2510-480b-85b4-6caff95a6c71
                      avatar:
                        id: 
                        attachment_id: 
                        content_type: 
                        url: 
                      cpf: 
                      email: piper@brekke-kris.test
                      full_name: King Kovacek
        '401':
          description: Unauthorized
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      auth: You need to sign in or sign up before continuing.
        '404':
          description: Not found
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      base:
                      - Couldn't find User with 'id'=not_an_id
                    request_id: f0a3a3b2-8c3c-455b-824b-4cd9db357b36
    put:
      summary: Update User
      tags:
      - Users
      security:
      - bearer_auth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Successful
          content:
            application/json:
              examples:
                Default:
                  value:
                    data:
                      id: 43d128ea-721c-4c82-b1df-6e7caf9cf3be
                      avatar:
                        id: 
                        attachment_id: 
                        content_type: 
                        url: 
                      cpf: '12496062095'
                      email: admin@acme.com
                      full_name: Dummy Name
        '422':
          description: Unprocessable entity
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      email:
                      - is invalid
                    request_id: 4977fc7c-61c6-4078-ae59-beaff42d4c0e
        '401':
          description: Unauthorized
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      auth: You need to sign in or sign up before continuing.
        '404':
          description: Not found
          content:
            application/json:
              examples:
                Default:
                  value:
                    errors:
                      base:
                      - Couldn't find User with 'id'=not_an_id
                    request_id: b1db8617-1a43-45af-a95b-75f008293abd
      requestBody:
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/v1/users/requests/update"
components:
  securitySchemes:
    bearer_auth:
      type: http
      scheme: bearer
  schemas:
    auth:
      requests:
        login:
          title: User Login Request
          type: object
          properties:
            user:
              type: object
              properties:
                email:
                  type: string
                  example: test@test
                password:
                  type: string
              required:
              - email
              - password
          required:
          - user
        signup:
          title: Create User Request
          type: object
          properties:
            user:
              type: object
              properties:
                email:
                  type: string
                  example: test@test
                password:
                  type: string
                full_name:
                  type: string
              required:
              - email
              - password
      responses:
        login:
          title: Create User Response
          type: object
          properties:
            data:
              message:
                type: string
              token:
                type: string
              user:
                "$ref": "#/components/schemas/v1/users/_common"
          required:
          - data
        signup:
          title: Create User Response
          type: object
          properties:
            data:
              message:
                type: string
              token:
                type: string
          required:
          - data
    common:
      pagination_meta:
        title: Pagination Meta
        type: object
        properties:
          current_page:
            type: integer
          total_pages:
            type: integer
          current_page_size:
            type: integer
          total:
            type: integer
        required:
        - current_page
        - total_pages
        - current_page_size
        - total
    v1:
      categories:
        _common:
          title: Category
          type: object
          properties:
            id:
              type: string
            name:
              type: string
            description:
              type: string
              nullable: true
            created_at:
              type: string
            updated_at:
              type: string
        _private:
          title: Category (private)
          type: object
          properties:
            id:
              type: string
            name:
              type: string
            description:
              type: string
              nullable: true
            created_at:
              type: string
            updated_at:
              type: string
            user:
              "$ref": "#/components/schemas/v1/users/_common"
        requests:
          create:
            title: Create Category Request
            type: object
            properties:
              category:
                type: object
                properties:
                  name:
                    type: string
                  description:
                    type: string
                    nullable: true
                required:
                - name
            required:
            - category
        responses:
          create:
            title: Create category response
            type: object
            properties:
              data:
                "$ref": "#/components/schemas/v1/categories/_private"
          index:
            title: Category index response
            type: object
            properties:
              data:
                type: array
                items:
                  "$ref": "#/components/schemas/v1/categories/_common"
              meta:
                "$ref": "#/components/schemas/common/pagination_meta"
            required:
            - meta
            - data
      transactions:
        _common:
          title: Transaction
          type: object
          properties:
            id:
              type: string
            name:
              type: string
            description:
              type: string
              nullable: true
            amount:
              type: string
            transaction_type:
              type: string
            created_at:
              type: string
            updated_at:
              type: string
            category:
              "$ref": "#/components/schemas/v1/categories/_common"
        _private:
          title: Transaction (private)
          type: object
          properties:
            id:
              type: string
            name:
              type: string
            description:
              type: string
              nullable: true
            amount:
              type: string
              format: decimal
            transaction_type:
              type: string
            created_at:
              type: string
            updated_at:
              type: string
            category:
              "$ref": "#/components/schemas/v1/categories/_common"
            user:
              "$ref": "#/components/schemas/v1/users/_common"
        requests:
          create:
            title: Create transaction Request
            type: object
            properties:
              transaction:
                type: object
                properties:
                  name:
                    type: string
                  description:
                    type: string
                    nullable: true
                  amount:
                    type: string
                  transaction_type:
                    type: integer
                  category_id:
                    type: integer
                required:
                - name
                - amount
                - transaction_type
                - category_id
            required:
            - transaction
          update:
            title: Update transaction Request
            type: object
            properties:
              transaction:
                type: object
                properties:
                  name:
                    type: string
                  description:
                    type: string
                    nullable: true
                  amount:
                    type: string
                  transaction_type:
                    type: integer
                  category_id:
                    type: integer
                required:
                - name
                - amount
                - transaction_type
                - category_id
            required:
            - transaction
        responses:
          create:
            title: Transaction Create response
            type: object
            properties:
              data:
                "$ref": "#/components/schemas/v1/transactions/_private"
          index:
            title: Transaction index response
            type: object
            properties:
              data:
                type: array
                items:
                  "$ref": "#/components/schemas/v1/transactions/_common"
              meta:
                "$ref": "#/components/schemas/common/pagination_meta"
            required:
            - meta
            - data
          show:
            title: Transaction Show response
            type: object
            properties:
              data:
                "$ref": "#/components/schemas/v1/transactions/_private"
          update:
            title: Transaction Update response
            type: object
            properties:
              data:
                "$ref": "#/components/schemas/v1/transactions/_private"
      users:
        _common:
          title: User
          type: object
          additionalProperties: true
          properties:
            id:
              type: string
            full_name:
              type: string
            email:
              type: string
              nullable: true
        _private:
          title: User Private
          type: object
          additionalProperties: true
          properties:
            id:
              type: string
            full_name:
              type: string
            email:
              type: string
              nullable: true
            cpf:
              type: string
              nullable: true
        requests:
          update:
            title: Update User Request
            type: object
            properties:
              user:
                type: object
                properties:
                  full_name:
                    type: string
                  cpf:
                    type: string
                    nullable: true
                  email:
                    type: string
                    nullable: true
                required:
                - user
        responses:
          show:
            title: Show User Response
            type: object
            properties:
              data:
                "$ref": "#/components/schemas/v1/users/_private"
            required:
            - data
servers:
- url: http://localhost:3000
